
> Problem: [2106. 摘水果](https://leetcode.cn/problems/maximum-fruits-harvested-after-at-most-k-steps/description/)

[TOC]

# 思路

> 只有先向左`x`和先向右`x`两种走法，所以遍历向左走的步数即可。

# 解题过程

> 构造前缀和数组`f`，然后暴力枚举走了`x`后的情况。

# 复杂度

- 时间复杂度: $O(N + K)$
- 空间复杂度: $O(n)$



# Code
```cpp
class Solution {
public:
    int maxTotalFruits(vector<vector<int>>& fruits, int startPos, int k) {
        const int N = 200005;
        vector<int> f(N, 0);

        for (auto& i : fruits)  f[i[0]] += i[1];

        for (int i = 1; i < N; i++) {
            
            f[i] += f[i - 1];

        } 

        int ans = 0;
        for (int x = 0; 2 * x <= k; x++) {

            int y = k - 2 * x;

            int l1 = max(startPos - x, 0);
            int r1 = min(startPos + y, N - 1);

            int r2 = min(startPos + x, N - 1);
            int l2 = max(startPos - y, 0);

            ans = max({ans,
                f[r1] - (l1 ? f[l1 - 1] : 0),
                f[r2] - (l2 ? f[l2 - 1] : 0)
            });

        }

        return ans;    
        }
};
```