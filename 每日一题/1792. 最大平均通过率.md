> Problem: [1792. 最大平均通过率](https://leetcode.cn/problems/maximum-average-pass-ratio/description/)

[TOC]

# 思路

> 维护一个优先级队列，每次先更新变化增量最大的班级。

# 解题过程

> 先遍历，将变化值存入优先队列 `pq` ，然后遍历每一个优等生，维护小根堆的堆顶，并处理 `classes` 即可，最后重新计算一次通过率，返回结果。

# 复杂度

- 时间复杂度: $O(n logn)$

- 空间复杂度: $O(n)$

# Code

```cpp
class Solution {

public:

    double maxAverageRatio(vector<vector<int>>& classes, int extraStudents) {

        priority_queue<pair<double, int>> pq;

        for (int i = 0; i < classes.size(); i ++) {



            double delta = 1.0 * (classes[i][0] + 1) / (classes[i][1] + 1) - 1.0 * classes[i][0] / classes[i][1];

            pq.push({delta, i});



        }



        while (extraStudents --) {



            int i = pq.top().second;

            pq.pop();

            classes[i][0] ++;

            classes[i][1] ++;

            double ddelta = 1.0 * (classes[i][0] + 1) / (classes[i][1] + 1) - 1.0 * classes[i][0] / classes[i][1];

            pq.push({ddelta, i});



        }



        double ans = 0;



        for (int i = 0; i < classes.size(); i ++) {



            ans += classes[i][0] / (double)classes[i][1];



        }



        return ans / classes.size();



    }

};
```
